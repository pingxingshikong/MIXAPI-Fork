import{j as t,I as Ja,c as W,d as Xa,e as _t,f as es,g as ts,h as as,i as ss,E as ae,D as Mt,B as Re,k as os,l as At,M as ls,F as se,C as G,A as $t,S as It,T as Rt,m as A,n as rs,o as Ce,p as Lt,q as qt,r as ns,s as is,t as cs,P as us}from"./semi-ui-SYqiqOBN.js";import{r,u as ds,R as ms}from"./react-core-DtMAePju.js";import{l as Pt,V as oe,a as $}from"./visactor-C6yu58Ir.js";import{m as Le}from"./tools-_urh1evK.js";import{I as le,a as re}from"./IllustrationConstruction-h2fiJesH.js";import{aL as Oe,aM as ps,aN as hs,aO as gs,aP as xs,aQ as ye,aR as w,aS as k,aT as I,aU as bs,aV as fs,aW as ve,aX as Cs,aY as ys,A as Z,s as Y,aZ as qe,a_ as vs,a$ as js,b0 as ks,b1 as Ds,b2 as Fs,b3 as Ts}from"./index-B2EdsORd.js";import{u as Es}from"./i18n-CVqrn-QJ.js";import"./react-components-XvIrFW7f.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ns=Oe("external-link",ws);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Bs=Oe("server",Ss);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Ms=Oe("wallet",_s),Ht="Inter,-apple-system,BlinkMacSystemFont,Segoe UI,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Helvetica Neue,Helvetica,Arial,sans-serif",He="theme-mode",Ut=(u,c,p)=>{const n=u&&getComputedStyle(document.body).getPropertyValue(u)||c;return n&&!isNaN(n[0])?`rgba(${n})`:n},As=(u,c,p)=>{new MutationObserver(n=>{n.forEach(h=>{h.attributeName===c&&p(h)})}).observe(u,{attributes:!0})},$s=(u,c,p,n)=>c.map((h,o)=>{const{scheme:D}=p[o];return Object.assign(Object.assign({},h),{scheme:h.scheme.map((R,q)=>Ut(typeof R=="object"?R[u]:R,D==null?void 0:D[q]))})}),Is=(u,c,p,n)=>{const h={};return Object.keys(c).forEach(o=>{const D=typeof c[o]=="object"?c[o][u]:c[o];h[o]=Ut(D,p[o])}),h},Ot=()=>document.body.hasAttribute(He)&&document.body.getAttribute(He)==="dark"?"dark":"light",Rs=u=>`semiDesign${u[0].toUpperCase()}${u.slice(1)}`,Ls=u=>{new MutationObserver(c=>{c.forEach(p=>{var n;if(p.addedNodes.length===1){const h=p.addedNodes[0];h.tagName==="LINK"&&((n=h.getAttribute)===null||n===void 0?void 0:n.call(h,"semi-theme-switcher"))==="true"&&u(p,h)}})}).observe(document.body,{childList:!0})},qs={default:{dataScheme:Pt.colorScheme.default.dataScheme,palette:{backgroundColor:"#16161a",borderColor:"rgba(255,255,255,0.08)",shadowColor:"rgba(0,0,0,0.25)",hoverBackgroundColor:"rgba(255,255,255,0.12)",sliderRailColor:"rgba(255,255,255,0.12)",sliderHandleColor:"#e4e7f5",sliderTrackColor:"rgba(84,169,255,1)",popupBackgroundColor:"#43444a",primaryFontColor:"rgba(249,249,249,1)",secondaryFontColor:"rgba(249,249,249,0.8)",tertiaryFontColor:"rgba(249,249,249,0.6)",axisLabelFontColor:"rgba(249,249,249,0.6)",disableFontColor:"rgba(249,249,249,0.35)",axisMarkerFontColor:"#16161a",axisGridColor:"rgba(255,255,255,0.08)",axisDomainColor:"rgba(255,255,255,0.08)",dataZoomHandleStrokeColor:"rgba(46,50,56,0.13)",dataZoomChartColor:"rgba(255,255,255,0.16)",playerControllerColor:"rgba(84,169,255,1)",axisMarkerBackgroundColor:"rgba(249,249,249,1)",markLabelBackgroundColor:"rgba(255,255,255,0.08)",markLineStrokeColor:"rgba(249,249,249,0.8)",dangerColor:"rgba(252,114,90,1)",warningColor:"rgba(255,174,67,1)",successColor:"rgba(93,194,100,1)",infoColor:"rgba(84,169,255,1)"}}},Ps={name:"semiDesignDark",description:"Semi Design - dark",type:"dark",fontFamily:Ht,colorScheme:qs},Hs={default:{dataScheme:Pt.colorScheme.default.dataScheme,palette:{backgroundColor:"rgba(255,255,255,1)",borderColor:"rgba(28,31,35,0.08)",shadowColor:"rgba(0,0,0,0.1)",hoverBackgroundColor:"rgba(46,50,56,0.05)",sliderRailColor:"rgba(46,50,56,0.05)",sliderHandleColor:"rgba(255,255,255,1)",sliderTrackColor:"rgba(0,100,250,1)",popupBackgroundColor:"rgba(255,255,255,1)",primaryFontColor:"rgba(28,31,35,1)",secondaryFontColor:"rgba(28,31,35,0.8)",tertiaryFontColor:"rgba(28,31,35,0.62)",axisLabelFontColor:"rgba(28,31,35,0.62)",disableFontColor:"rgba(28,31,35,0.35)",axisMarkerFontColor:"rgba(255,255,255,1)",axisGridColor:"rgba(28,31,35,0.08)",axisDomainColor:"rgba(28,31,35,0.15)",dataZoomHandleStrokeColor:"rgba(46,50,56,0.13)",dataZoomChartColor:"rgba(46,50,56,0.09)",playerControllerColor:"rgba(0,100,250,1)",axisMarkerBackgroundColor:"rgba(28,31,35,1)",markLabelBackgroundColor:"rgba(28,31,35,0.08)",markLineStrokeColor:"rgba(28,31,35,0.8)",dangerColor:"rgba(249,57,32,1)",warningColor:"rgba(252,136,0,1)",successColor:"rgba(59,179,70,1)",infoColor:"rgba(0,100,250,1)"}}},Us={name:"semiDesignLight",description:"Semi Design - light",type:"light",fontFamily:Ht,colorScheme:Hs},Os={backgroundColor:"--semi-color-bg-0",borderColor:"--semi-color-border",hoverBackgroundColor:"--semi-color-fill-0",sliderRailColor:"--semi-color-fill-0",sliderHandleColor:"--semi-white",sliderTrackColor:"--semi-color-primary",popupBackgroundColor:"--semi-color-bg-3",primaryFontColor:"--semi-color-text-0",secondaryFontColor:"--semi-color-text-1",tertiaryFontColor:"--semi-color-text-2",axisLabelFontColor:"--semi-color-text-0",disableFontColor:"--semi-color-disabled-text",axisMarkerFontColor:"--semi-color-bg-0",axisGridColor:"--semi-color-border",axisDomainColor:{light:"--semi-grey-9",dark:"--semi-color-border"},dataZoomHandleStrokeColor:{light:"--semi-color-fill-2"},dataZoomChartColor:"--semi-color-fill-1",playerControllerColor:"--semi-color-primary",axisMarkerBackgroundColor:"--semi-color-text-0",markLabelBackgroundColor:"--semi-color-border",markLineStrokeColor:"--semi-color-text-1",dangerColor:"--semi-color-danger",warningColor:"--semi-color-warning",successColor:"--semi-color-success",infoColor:"--semi-color-info"},Qs=[{maxDomainLength:10,scheme:["--semi-color-data-0","--semi-color-data-2","--semi-color-data-4","--semi-color-data-6","--semi-color-data-8","--semi-color-data-10","--semi-color-data-12","--semi-color-data-14","--semi-color-data-16","--semi-color-data-18"]},{scheme:["--semi-color-data-0","--semi-color-data-1","--semi-color-data-2","--semi-color-data-3","--semi-color-data-4","--semi-color-data-5","--semi-color-data-6","--semi-color-data-7","--semi-color-data-8","--semi-color-data-9","--semi-color-data-10","--semi-color-data-11","--semi-color-data-12","--semi-color-data-13","--semi-color-data-14","--semi-color-data-15","--semi-color-data-16","--semi-color-data-17","--semi-color-data-18","--semi-color-data-19"]}],zs={light:Us,dark:Ps},Ue=(u,c)=>{const p=zs[u],{dataScheme:n,palette:h}=p.colorScheme.default,o={default:{dataScheme:$s(u,Qs,n),palette:Is(u,Os,h)}};return Object.assign(Object.assign({},p),{colorScheme:o})},Vs=u=>{const{defaultMode:c,isWatchingMode:p=!0,isWatchingThemeSwitch:n=!1}=u??{};Pe(!1,c),p&&As(document.body,He,()=>Pe()),n&&Ls(()=>{const h=Ot(),o=JSON.stringify(Ue(h).colorScheme);let D=0;const R=setInterval(()=>{const q=Ue(h);(D>50||o!==JSON.stringify(q.colorScheme))&&(Pe(!0,h,q),clearInterval(R)),D++},100)})},Pe=(u,c,p)=>{c||(c=Ot());const n=Rs(c);(u||oe.ThemeManager.getCurrentTheme()!==n)&&(u&&oe.ThemeManager.removeTheme(n),oe.ThemeManager.themeExist(n)||oe.ThemeManager.registerTheme(n,p??Ue(c)),oe.ThemeManager.setCurrentTheme(n))},no=u=>{var Ct,yt,vt,jt,kt,Dt,Ft,Tt,Et,wt,Nt;const[c,p]=r.useContext(ps),[n,h]=r.useContext(hs),{t:o}=Es(),D=ds(),R=gs(),q=r.useRef(),Qe=r.useRef(!1),je=r.useRef(null),S={mode:"desktop-browser"},P={shadows:"always",bordered:!1,headerLine:!0},Qt={className:"w-full mb-2 !rounded-lg",size:"large"},ze="text-white hover:bg-opacity-80 !rounded-full",ne="flex items-center gap-2",F={width:96,height:96};let Ve=new Date;const f=xs(),zt=((Ct=n==null?void 0:n.status)==null?void 0:Ct.api_info_enabled)??!0,Ke=((yt=n==null?void 0:n.status)==null?void 0:yt.announcements_enabled)??!0,We=((vt=n==null?void 0:n.status)==null?void 0:vt.faq_enabled)??!0,Ge=((jt=n==null?void 0:n.status)==null?void 0:jt.uptime_kuma_enabled)??!0,ke=zt,Vt=Ke||We||Ge,De=r.useCallback(()=>localStorage.getItem("data_export_default_time")||"hour",[]),ie=r.useCallback((e,a=!1)=>{const s={hour:a?3600:60,day:a?86400:1440,week:a?604800:10080};return s[e]||s.hour},[]),Kt=r.useCallback(()=>{const e=De(),a=new Date().getTime()/1e3;switch(e){case"hour":return ye(a-86400);case"week":return ye(a-86400*30);default:return ye(a-86400*7)}},[De]),H=r.useCallback((e,a,s)=>{e.has(a)||e.set(a,0),e.set(a,e.get(a)+s)},[]),Ze=r.useCallback((e,...a)=>{a.forEach(s=>{s.has(e)||s.set(e,0)})},[]),j=r.useCallback((e,a,s,l,i)=>{e(d=>({...d,data:[{id:i,values:a}],title:{...d.title,subtext:s},color:{specified:l}}))},[]),J=r.useCallback((e,a)=>t.jsxs("div",{className:ne,children:[t.jsx(e,{size:16}),a]}),[]),ce=r.useCallback((e,a)=>t.jsx(e,{...Qt,...a}),[]),Wt=r.useMemo(()=>[{label:o("å°æ—¶"),value:"hour"},{label:o("å¤©"),value:"day"},{label:o("å‘¨"),value:"week"}],[o]),[Gt,Zt]=r.useState({username:"",token_name:"",model_name:"",start_timestamp:Kt(),end_timestamp:ye(Ve.getTime()/1e3+3600),channel:"",data_export_default_time:""}),[g,Yt]=r.useState(De()),[Fe,Ye]=r.useState(!1),[Jt,Xt]=r.useState(!1),[Ks,ea]=r.useState([]),[Te,ta]=r.useState(0),[U,aa]=r.useState(0),[O,sa]=r.useState(0),[oa,la]=r.useState([{type:"null",value:"0"}]),[ra,na]=r.useState([]),[Je,ia]=r.useState({}),[B,ca]=r.useState("1"),[ua,da]=r.useState(!1),[ma,Ee]=r.useState(!1),[Q,pa]=r.useState({balance:[],usedQuota:[],requestCount:[],times:[],consumeQuota:[],tokens:[],rpm:[],tpm:[]}),[Ws,ha]=r.useState([]),[Gs,ga]=r.useState([]),[Zs,xa]=r.useState([]),[ba,fa]=r.useState({type:"bar",data:[{id:"channelData",values:[]}],xField:"Time",yField:"Count",seriesField:"Channel",legends:{visible:!0,selectMode:"single"},title:{visible:!0,text:o("æŒ‰æ¸ é“è°ƒç”¨æ¬¡æ•°ç»Ÿè®¡"),subtext:""},tooltip:{mark:{content:[{key:e=>e.Channel,value:e=>w(e.Count)}]}},color:{specified:k}}),[Ca,ya]=r.useState({type:"bar",data:[{id:"tokenData",values:[]}],xField:"Time",yField:"Count",seriesField:"Token",legends:{visible:!0,selectMode:"single"},title:{visible:!0,text:o("æŒ‰ä»¤ç‰Œè°ƒç”¨æ¬¡æ•°ç»Ÿè®¡"),subtext:""},tooltip:{mark:{content:[{key:e=>e.Token,value:e=>w(e.Count)}]}},color:{specified:k}}),[va,ja]=r.useState({type:"bar",data:[{id:"userData",values:[]}],xField:"Time",yField:"Count",seriesField:"User",legends:{visible:!0,selectMode:"single"},title:{visible:!0,text:o("æŒ‰ç”¨æˆ·è°ƒç”¨æ¬¡æ•°ç»Ÿè®¡"),subtext:""},tooltip:{mark:{content:[{key:e=>e.User,value:e=>w(e.Count)}]}},color:{specified:k}}),we=r.useRef(null),Ne=r.useRef(null),Se=r.useRef(null),ue=r.useRef({}),[ka,Xe]=r.useState(!1),[Da,et]=r.useState(!1),[tt,de]=r.useState(!1),[_,Fa]=r.useState([]),[at,st]=r.useState(!1),[M,ot]=r.useState(""),{username:Be,model_name:Ys,start_timestamp:C,end_timestamp:y,channel:Js}=Gt,[Ta,Ea]=r.useState({type:"pie",data:[{id:"id0",values:oa}],outerRadius:.8,innerRadius:.5,padAngle:.6,valueField:"value",categoryField:"type",pie:{style:{cornerRadius:10},state:{hover:{outerRadius:.85,stroke:"#000",lineWidth:1},selected:{outerRadius:.85,stroke:"#000",lineWidth:1}}},title:{visible:!0,text:o("æ¨¡åž‹è°ƒç”¨æ¬¡æ•°å æ¯”"),subtext:`${o("æ€»è®¡")}ï¼š${w(O)}`},legends:{visible:!0,orient:"left"},label:{visible:!0},tooltip:{mark:{content:[{key:e=>e.type,value:e=>w(e.value)}]}},color:{specified:k}}),[wa,Na]=r.useState({type:"bar",data:[{id:"barData",values:ra}],xField:"Time",yField:"Usage",seriesField:"Model",stack:!0,legends:{visible:!0,selectMode:"single"},title:{visible:!0,text:o("æ¨¡åž‹æ¶ˆè€—åˆ†å¸ƒ"),subtext:`${o("æ€»è®¡")}ï¼š${I(Te,2)}`},bar:{state:{hover:{stroke:"#000",lineWidth:1}}},tooltip:{mark:{content:[{key:e=>e.Model,value:e=>I(e.rawQuota||0,4)}]},dimension:{content:[{key:e=>e.Model,value:e=>e.rawQuota||0}],updateContent:e=>{e.sort((s,l)=>l.value-s.value);let a=0;for(let s=0;s<e.length;s++){if(e[s].key=="å…¶ä»–")continue;let l=parseFloat(e[s].value);isNaN(l)&&(l=0),e[s].datum&&e[s].datum.TimeSum&&(a=e[s].datum.TimeSum),e[s].value=I(l,4)}return e.unshift({key:o("æ€»è®¡"),value:I(a,4)}),e}}},color:{specified:k}}),[Sa,Ba]=r.useState({type:"line",data:[{id:"lineData",values:[]}],xField:"Time",yField:"Count",seriesField:"Model",legends:{visible:!0,selectMode:"single"},title:{visible:!0,text:o("æ¨¡åž‹æ¶ˆè€—è¶‹åŠ¿"),subtext:""},tooltip:{mark:{content:[{key:e=>e.Model,value:e=>w(e.Count)}]}},color:{specified:k}}),[_a,Ma]=r.useState({type:"bar",data:[{id:"rankData",values:[]}],xField:"Model",yField:"Count",seriesField:"Model",legends:{visible:!0,selectMode:"single"},title:{visible:!0,text:o("æ¨¡åž‹è°ƒç”¨æ¬¡æ•°æŽ’è¡Œ"),subtext:""},bar:{state:{hover:{stroke:"#000",lineWidth:1}}},tooltip:{mark:{content:[{key:e=>e.Model,value:e=>w(e.Count)}]}},color:{specified:k}}),_e=r.useMemo(()=>{const e=(Date.parse(y)-Date.parse(C))/6e4,a=isNaN(O/e)?"0":(O/e).toFixed(3),s=isNaN(U/e)?"0":(U/e).toFixed(3);return{avgRPM:a,avgTPM:s,timeDiff:e}},[O,U,y,C]),Aa=r.useMemo(()=>{var l;const e=new Date().getHours();let a="";e>=5&&e<12?a=o("æ—©ä¸Šå¥½"):e>=12&&e<14?a=o("ä¸­åˆå¥½"):e>=14&&e<18?a=o("ä¸‹åˆå¥½"):a=o("æ™šä¸Šå¥½");const s=((l=c==null?void 0:c.user)==null?void 0:l.username)||"";return`ðŸ‘‹${a}ï¼Œ${s}`},[o,(kt=c==null?void 0:c.user)==null?void 0:kt.username]),$a=r.useCallback((e,a)=>({type:"line",data:[{id:"trend",values:e.map((s,l)=>({x:l,y:s}))}],xField:"x",yField:"y",height:40,width:100,axes:[{orient:"bottom",visible:!1},{orient:"left",visible:!1}],padding:0,autoFit:!1,legends:{visible:!1},tooltip:{visible:!1},crosshair:{visible:!1},line:{style:{stroke:a,lineWidth:2}},point:{visible:!1},background:{fill:"transparent"}}),[]),Ia=r.useMemo(()=>{var e,a,s;return[{title:J(Ms,o("è´¦æˆ·æ•°æ®")),color:"bg-blue-50",bgColor:"#d0effe",items:[{title:o("å½“å‰ä½™é¢"),value:I((e=c==null?void 0:c.user)==null?void 0:e.quota),icon:t.jsx(Ja,{}),avatarColor:"blue",onClick:()=>D("/console/topup"),trendData:[],trendColor:"#3b82f6",trendBgColor:"#d0effe"},{title:o("åŽ†å²æ¶ˆè€—"),value:I((a=c==null?void 0:c.user)==null?void 0:a.used_quota),icon:t.jsx(W,{}),avatarColor:"purple",trendData:[],trendColor:"#8b5cf6",trendBgColor:"#d0effe"}]},{title:J(bs,o("ä½¿ç”¨ç»Ÿè®¡")),color:"bg-green-50",bgColor:"#e1f6e5",items:[{title:o("è¯·æ±‚æ¬¡æ•°"),value:(s=c.user)==null?void 0:s.request_count,icon:t.jsx(Xa,{}),avatarColor:"green",trendData:[],trendColor:"#10b981",trendBgColor:"#e1f6e5"},{title:o("ç»Ÿè®¡æ¬¡æ•°"),value:O,icon:t.jsx(_t,{}),avatarColor:"cyan",trendData:Q.times,trendColor:"#06b6d4",trendBgColor:"#e1f6e5"}]},{title:J(fs,o("èµ„æºæ¶ˆè€—")),color:"bg-yellow-50",bgColor:"#faf4e6",items:[{title:o("ç»Ÿè®¡é¢åº¦"),value:I(Te),icon:t.jsx(es,{}),avatarColor:"yellow",trendData:Q.consumeQuota,trendColor:"#f59e0b",trendBgColor:"#faf4e6"},{title:o("ç»Ÿè®¡Tokens"),value:isNaN(U)?0:U,icon:t.jsx(ts,{}),avatarColor:"pink",trendData:Q.tokens,trendColor:"#ec4899",trendBgColor:"#faf4e6"}]},{title:J(ve,o("æ€§èƒ½æŒ‡æ ‡")),color:"bg-indigo-50",bgColor:"#efddf2",items:[{title:o("å¹³å‡RPM"),value:_e.avgRPM,icon:t.jsx(as,{}),avatarColor:"indigo",trendData:Q.rpm,trendColor:"#6366f1",trendBgColor:"#efddf2"},{title:o("å¹³å‡TPM"),value:_e.avgTPM,icon:t.jsx(ss,{}),avatarColor:"orange",trendData:Q.tpm,trendColor:"#f97316",trendBgColor:"#efddf2"}]}]},[J,o,(Dt=c==null?void 0:c.user)==null?void 0:Dt.quota,(Ft=c==null?void 0:c.user)==null?void 0:Ft.used_quota,(Tt=c==null?void 0:c.user)==null?void 0:Tt.request_count,O,Te,U,Q,_e,D]),Ra=r.useCallback(async e=>{await Cs(e)&&ys(o("å¤åˆ¶æˆåŠŸ"))},[o]),La=r.useCallback(e=>{const s=`https://www.tcptest.cn/http/${encodeURIComponent(e)}`;window.open(s,"_blank","noopener,noreferrer")},[]),me=r.useCallback((e,a)=>{if(a==="data_export_default_time"){Yt(e);return}Zt(s=>({...s,[a]:e}))},[]),pe=r.useCallback(async()=>{Ye(!0);const e=Date.now();try{let a="",s=Date.parse(C)/1e3,l=Date.parse(y)/1e3;f?a=`/api/data/?username=${Be}&start_timestamp=${s}&end_timestamp=${l}&default_time=${g}`:a=`/api/data/self/?start_timestamp=${s}&end_timestamp=${l}&default_time=${g}`;const i=await Z.get(a),{success:d,message:x,data:T}=i.data;d?(ea(T),T.length===0&&T.push({count:0,model_name:"æ— æ•°æ®",quota:0,created_at:Ve.getTime()/1e3}),T.sort((V,v)=>V.created_at-v.created_at),za(T)):Y(x)}finally{const a=Date.now()-e,s=Math.max(0,500-a);setTimeout(()=>{Ye(!1)},s)}},[C,y,Be,g,f]),lt=r.useCallback(async()=>{if(f)try{let e=Date.parse(C)/1e3,a=Date.parse(y)/1e3;const s=`/api/statistics/channel?start_timestamp=${e}&end_timestamp=${a}&default_time=${g}`,l=await Z.get(s),{success:i,message:d,data:x}=l.data;i?(ha(x||[]),Va(x||[])):Y(d)}catch(e){console.error("Error loading channel data:",e)}},[C,y,g,f]),rt=r.useCallback(async()=>{if(f)try{let e=Date.parse(C)/1e3,a=Date.parse(y)/1e3;const s=`/api/statistics/token?start_timestamp=${e}&end_timestamp=${a}&default_time=${g}`,l=await Z.get(s),{success:i,message:d,data:x}=l.data;i?(ga(x||[]),Ka(x||[])):Y(d)}catch(e){console.error("Error loading token data:",e)}},[C,y,g,f]),nt=r.useCallback(async()=>{if(f)try{let e=Date.parse(C)/1e3,a=Date.parse(y)/1e3;const s=`/api/statistics/user?start_timestamp=${e}&end_timestamp=${a}&default_time=${g}`,l=await Z.get(s),{success:i,message:d,data:x}=l.data;i?(xa(x||[]),Wa(x||[])):Y(d)}catch(e){console.error("Error loading user data:",e)}},[C,y,g,f]),he=r.useCallback(async()=>{f&&await Promise.all([lt(),rt(),nt()])},[lt,rt,nt,f]),X=r.useCallback(async()=>{st(!0);try{const e=await Z.get("/api/uptime/status"),{success:a,message:s,data:l}=e.data;a?(Fa(l||[]),l&&l.length>0&&!M&&ot(l[0].categoryName)):Y(s)}catch(e){console.error(e)}finally{st(!1)}},[M]),Me=r.useCallback(async()=>{await Promise.all([pe(),X()]),await he()},[pe,X,he]),qa=r.useCallback(()=>{Me(),Ee(!1)},[Me]),Pa=r.useCallback(async()=>{await pe(),await X(),await he()},[pe,X,he]),Ha=r.useCallback(()=>{Ee(!0)},[]),Ua=r.useCallback(()=>{Ee(!1)},[]),it=()=>{if(je.current){const e=je.current,a=e.scrollHeight>e.clientHeight,s=e.scrollTop+e.clientHeight>=e.scrollHeight-5;da(a&&!s)}},Oa=()=>{it()},ee=(e,a)=>{if(e.current){const s=e.current,l=s.scrollHeight>s.clientHeight,i=s.scrollTop+s.clientHeight>=s.scrollHeight-5;a(l&&!i)}},ge=(e,a)=>{ee(e,a)};r.useEffect(()=>{const e=setTimeout(()=>{if(it(),ee(we,Xe),ee(Ne,et),_.length===1)ee(Se,de);else if(_.length>1&&M){const a=ue.current[M];a&&ee(a,de)}},100);return()=>clearTimeout(e)},[_,M]),r.useEffect(()=>{const e=setTimeout(()=>{Xt(!0)},100);return()=>clearTimeout(e)},[]);const Qa=async()=>{let e=await Z.get("/api/user/self");const{success:a,message:s,data:l}=e.data;a?p({type:"login",payload:l}):Y(s)},ct=r.useCallback(e=>{const a={totalQuota:0,totalTimes:0,totalTokens:0,uniqueModels:new Set,timePoints:[],timeQuotaMap:new Map,timeTokensMap:new Map,timeCountMap:new Map};return e.forEach(s=>{a.uniqueModels.add(s.model_name),a.totalTokens+=s.token_used,a.totalQuota+=s.quota,a.totalTimes+=s.count;const l=qe(s.created_at,g);a.timePoints.includes(l)||a.timePoints.push(l),Ze(l,a.timeQuotaMap,a.timeTokensMap,a.timeCountMap),H(a.timeQuotaMap,l,s.quota),H(a.timeTokensMap,l,s.token_used),H(a.timeCountMap,l,s.count)}),a.timePoints.sort(),a},[g,Ze,H]),ut=r.useCallback((e,a,s,l)=>{const i=e.map(v=>a.get(v)||0),d=e.map(v=>s.get(v)||0),x=e.map(v=>l.get(v)||0),T=[],V=[];if(e.length>=2){const v=ie(g);for(let K=0;K<e.length;K++)T.push(l.get(e[K])/v),V.push(s.get(e[K])/v)}return{balance:[],usedQuota:[],requestCount:[],times:x,consumeQuota:i,tokens:d,rpm:T,tpm:V}},[g,ie]),dt=r.useCallback(e=>{const a={};return Array.from(e).forEach(s=>{a[s]=k[s]||Je[s]||vs(s)}),a},[Je]),mt=r.useCallback(e=>{const a=new Map;return e.forEach(s=>{const l=qe(s.created_at,g),i=s.model_name,d=`${l}-${i}`;a.has(d)||a.set(d,{time:l,model:i,quota:0,count:0});const x=a.get(d);x.quota+=s.quota,x.count+=s.count}),a},[g]),pt=r.useCallback((e,a)=>{let s=Array.from(new Set([...e.values()].map(l=>l.time)));if(s.length<7){const l=Math.max(...a.map(d=>d.created_at)),i=ie(g,!0);s=Array.from({length:7},(d,x)=>qe(l-(6-x)*i,g))}return s},[g,ie]),za=r.useCallback(e=>{const a=ct(e),{totalQuota:s,totalTimes:l,totalTokens:i,uniqueModels:d,timePoints:x,timeQuotaMap:T,timeTokensMap:V,timeCountMap:v}=a,K=ut(x,T,V,v);pa(K);const te=dt(d);ia(te);const xe=mt(e),$e=new Map;for(let[b,m]of xe)H($e,m.model,m.count);const St=Array.from($e).map(([b,m])=>({type:b,value:m})).sort((b,m)=>m.value-b.value),Bt=pt(xe,e);let be=[];Bt.forEach(b=>{let m=Array.from(d).map(E=>{const N=`${b}-${E}`,L=xe.get(N);return{Time:b,Model:E,rawQuota:(L==null?void 0:L.quota)||0,Usage:L!=null&&L.quota?js(L.quota,4):0}});const fe=m.reduce((E,N)=>E+N.rawQuota,0);m.sort((E,N)=>N.rawQuota-E.rawQuota),m=m.map(E=>({...E,TimeSum:fe})),be.push(...m)}),be.sort((b,m)=>b.Time.localeCompare(m.Time)),j(Ea,St,`${o("æ€»è®¡")}ï¼š${w(l)}`,te,"id0"),j(Na,be,`${o("æ€»è®¡")}ï¼š${I(s,2)}`,te,"barData");let Ie=[];Bt.forEach(b=>{const m=Array.from(d).map(fe=>{const E=`${b}-${fe}`,N=xe.get(E);return{Time:b,Model:fe,Count:(N==null?void 0:N.count)||0}});Ie.push(...m)}),Ie.sort((b,m)=>b.Time.localeCompare(m.Time));const Ya=Array.from($e).map(([b,m])=>({Model:b,Count:m})).sort((b,m)=>m.Count-b.Count);j(Ba,Ie,`${o("æ€»è®¡")}ï¼š${w(l)}`,te,"lineData"),j(Ma,Ya,`${o("æ€»è®¡")}ï¼š${w(l)}`,te,"rankData"),la(St),na(be),ta(s),sa(l),aa(i)},[ct,ut,dt,mt,pt,j,H,o]),Va=r.useCallback(e=>{if(!e||e.length===0)return;const a={};e.forEach(l=>{const i=`${l.time}-${l.channel_name||"Channel "+l.channel_id}`;a[i]||(a[i]={Time:l.time,Channel:l.channel_name||"Channel "+l.channel_id,Count:0}),a[i].Count+=l.count});const s=Object.values(a);s.sort((l,i)=>l.Time.localeCompare(i.Time)),j(fa,s,`${o("æ€»è®¡")}ï¼š${s.reduce((l,i)=>l+i.Count,0)}`,k,"channelData")},[j,o]),Ka=r.useCallback(e=>{if(!e||e.length===0)return;const a={};e.forEach(l=>{const i=`${l.time}-${l.token_name}`;a[i]||(a[i]={Time:l.time,Token:l.token_name,Count:0}),a[i].Count+=l.count});const s=Object.values(a);s.sort((l,i)=>l.Time.localeCompare(i.Time)),j(ya,s,`${o("æ€»è®¡")}ï¼š${s.reduce((l,i)=>l+i.Count,0)}`,k,"tokenData")},[j,o]),Wa=r.useCallback(e=>{if(!e||e.length===0)return;const a={};e.forEach(l=>{const i=`${l.time}-${l.username}`;a[i]||(a[i]={Time:l.time,User:l.username,Count:0}),a[i].Count+=l.count});const s=Object.values(a);s.sort((l,i)=>l.Time.localeCompare(i.Time)),j(ja,s,`${o("æ€»è®¡")}ï¼š${s.reduce((l,i)=>l+i.Count,0)}`,k,"userData")},[j,o]),Ga=r.useMemo(()=>[{color:"grey",label:o("é»˜è®¤"),type:"default"},{color:"blue",label:o("è¿›è¡Œä¸­"),type:"ongoing"},{color:"green",label:o("æˆåŠŸ"),type:"success"},{color:"orange",label:o("è­¦å‘Š"),type:"warning"},{color:"red",label:o("å¼‚å¸¸"),type:"error"}],[o]),z=r.useMemo(()=>({1:{color:"#10b981",label:o("æ­£å¸¸"),text:o("å¯ç”¨çŽ‡")},0:{color:"#ef4444",label:o("å¼‚å¸¸"),text:o("æœ‰å¼‚å¸¸")},2:{color:"#f59e0b",label:o("é«˜å»¶è¿Ÿ"),text:o("é«˜å»¶è¿Ÿ")},3:{color:"#3b82f6",label:o("ç»´æŠ¤ä¸­"),text:o("ç»´æŠ¤ä¸­")}}),[o]),Za=r.useMemo(()=>Object.entries(z).map(([e,a])=>({status:Number(e),color:a.color,label:a.label})),[z]),Ae=r.useCallback(e=>{var a;return((a=z[e])==null?void 0:a.color)||"#8b9aa7"},[z]),ht=r.useCallback(e=>{var a;return((a=z[e])==null?void 0:a.text)||o("æœªçŸ¥")},[z,o]),gt=r.useMemo(()=>{var e;return((e=n==null?void 0:n.status)==null?void 0:e.api_info)||[]},[(Et=n==null?void 0:n.status)==null?void 0:Et.api_info]),xt=r.useMemo(()=>{var a;return(((a=n==null?void 0:n.status)==null?void 0:a.announcements)||[]).map(s=>({...s,time:ks(s.publishDate)}))},[(wt=n==null?void 0:n.status)==null?void 0:wt.announcements]),bt=r.useMemo(()=>{var e;return((e=n==null?void 0:n.status)==null?void 0:e.faq)||[]},[(Nt=n==null?void 0:n.status)==null?void 0:Nt.faq]),ft=r.useCallback(e=>{if(!e||e.length===0)return t.jsx("div",{className:"flex justify-center items-center py-4",children:t.jsx(ae,{image:t.jsx(le,{style:F}),darkModeImage:t.jsx(re,{style:F}),title:o("æš‚æ— ç›‘æŽ§æ•°æ®")})});const a={};e.forEach(l=>{const i=l.group||"";a[i]||(a[i]=[]),a[i].push(l)});const s=(l,i)=>t.jsxs("div",{className:"p-2 hover:bg-white rounded-lg transition-colors",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:Ae(l.status)}}),t.jsx("span",{className:"text-sm font-medium text-gray-900",children:l.name})]}),t.jsxs("span",{className:"text-xs text-gray-500",children:[((l.uptime||0)*100).toFixed(2),"%"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-gray-500",children:ht(l.status)}),t.jsx("div",{className:"flex-1",children:t.jsx(us,{percent:(l.uptime||0)*100,showInfo:!1,"aria-label":`${l.name} uptime`,stroke:Ae(l.status)})})]})]},i);return Object.entries(a).map(([l,i])=>t.jsxs("div",{className:"mb-2",children:[l&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"text-md font-semibold text-gray-500 px-2 py-1",children:l}),t.jsx(Mt,{})]}),i.map(s)]},l||"default"))},[o,Ae,ht]);return r.useEffect(()=>{Qa(),Qe.current||(Vs({isWatchingThemeSwitch:!0}),Qe.current=!0,Pa())},[]),t.jsxs("div",{className:"bg-gray-50 h-full mt-[64px] px-2",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-800 transition-opacity duration-1000 ease-in-out",style:{opacity:Jt?1:0},children:Aa}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx(Re,{type:"tertiary",icon:t.jsx(os,{}),onClick:Ha,className:`bg-green-500 hover:bg-green-600 ${ze}`}),t.jsx(Re,{type:"tertiary",icon:t.jsx(At,{}),onClick:Me,loading:Fe,className:`bg-blue-500 hover:bg-blue-600 ${ze}`})]})]}),t.jsx(ls,{title:o("æœç´¢æ¡ä»¶"),visible:ma,onOk:qa,onCancel:Ua,closeOnEsc:!0,size:R?"full-width":"small",centered:!0,children:t.jsxs(se,{ref:q,layout:"vertical",className:"w-full",children:[ce(se.DatePicker,{field:"start_timestamp",label:o("èµ·å§‹æ—¶é—´"),initValue:C,value:C,type:"dateTime",name:"start_timestamp",onChange:e=>me(e,"start_timestamp")}),ce(se.DatePicker,{field:"end_timestamp",label:o("ç»“æŸæ—¶é—´"),initValue:y,value:y,type:"dateTime",name:"end_timestamp",onChange:e=>me(e,"end_timestamp")}),ce(se.Select,{field:"data_export_default_time",label:o("æ—¶é—´ç²’åº¦"),initValue:g,placeholder:o("æ—¶é—´ç²’åº¦"),name:"data_export_default_time",optionList:Wt,onChange:e=>me(e,"data_export_default_time")}),f&&ce(se.Input,{field:"username",label:o("ç”¨æˆ·åç§°"),value:Be,placeholder:o("å¯é€‰å€¼"),name:"username",onChange:e=>me(e,"username")})]})}),t.jsx("div",{className:"mb-4",children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Ia.map((e,a)=>t.jsx(G,{...P,className:`${e.color} border-0 !rounded-2xl w-full`,title:e.title,style:{backgroundColor:e.bgColor},children:t.jsx("div",{className:"space-y-4",children:e.items.map((s,l)=>t.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:s.onClick,children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx($t,{className:"mr-3",size:"small",color:s.avatarColor,children:s.icon}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-gray-500",children:s.title}),t.jsx("div",{className:"text-lg font-semibold",children:t.jsx(It,{loading:Fe,active:!0,placeholder:t.jsx(It.Paragraph,{active:!0,rows:1,style:{width:"65px",height:"24px",marginTop:"4px"}}),children:s.value})})]})]}),(Fe||s.trendData&&s.trendData.length>0)&&t.jsx("div",{className:"w-24 h-10",children:t.jsx($,{spec:$a(s.trendData,s.trendColor,s.trendBgColor),option:S})})]},l))})},a))})}),t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:`grid grid-cols-1 gap-4 ${ke?"lg:grid-cols-4":""}`,children:[t.jsx(G,{...P,className:`shadow-sm !rounded-2xl ${ke?"lg:col-span-3":""}`,title:t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between w-full gap-3",children:[t.jsxs("div",{className:ne,children:[t.jsx(Ds,{size:16}),o("æ¨¡åž‹æ•°æ®åˆ†æž")]}),t.jsxs(Rt,{type:"button",activeKey:B,onChange:ca,children:[t.jsx(A,{tab:t.jsxs("span",{children:[t.jsx(W,{}),o("æ¶ˆè€—åˆ†å¸ƒ")]}),itemKey:"1"}),t.jsx(A,{tab:t.jsxs("span",{children:[t.jsx(_t,{}),o("æ¶ˆè€—è¶‹åŠ¿")]}),itemKey:"2"}),t.jsx(A,{tab:t.jsxs("span",{children:[t.jsx(rs,{}),o("è°ƒç”¨æ¬¡æ•°åˆ†å¸ƒ")]}),itemKey:"3"}),t.jsx(A,{tab:t.jsxs("span",{children:[t.jsx(W,{}),o("è°ƒç”¨æ¬¡æ•°æŽ’è¡Œ")]}),itemKey:"4"}),f&&t.jsx(A,{tab:t.jsxs("span",{children:[t.jsx(W,{}),o("æŒ‰æ¸ é“ç»Ÿè®¡")]}),itemKey:"5"}),f&&t.jsx(A,{tab:t.jsxs("span",{children:[t.jsx(W,{}),o("æŒ‰ä»¤ç‰Œç»Ÿè®¡")]}),itemKey:"6"}),f&&t.jsx(A,{tab:t.jsxs("span",{children:[t.jsx(W,{}),o("æŒ‰ç”¨æˆ·ç»Ÿè®¡")]}),itemKey:"7"})]})]}),bodyStyle:{padding:0},children:t.jsxs("div",{className:"h-96 p-2",children:[B==="1"&&t.jsx($,{spec:wa,option:S}),B==="2"&&t.jsx($,{spec:Sa,option:S}),B==="3"&&t.jsx($,{spec:Ta,option:S}),B==="4"&&t.jsx($,{spec:_a,option:S}),B==="5"&&f&&t.jsx($,{spec:ba,option:S}),B==="6"&&f&&t.jsx($,{spec:Ca,option:S}),B==="7"&&f&&t.jsx($,{spec:va,option:S})]})}),ke&&t.jsx(G,{...P,className:"bg-gray-50 border-0 !rounded-2xl",title:t.jsxs("div",{className:ne,children:[t.jsx(Bs,{size:16}),o("APIä¿¡æ¯")]}),bodyStyle:{padding:0},children:t.jsxs("div",{className:"card-content-container",children:[t.jsx("div",{ref:je,className:"p-2 max-h-96 overflow-y-auto card-content-scroll",onScroll:Oa,children:gt.length>0?gt.map(e=>t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex p-2 hover:bg-white rounded-lg transition-colors cursor-pointer",children:[t.jsx("div",{className:"flex-shrink-0 mr-3",children:t.jsx($t,{size:"extra-small",color:e.color,children:e.route.substring(0,2)})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-1 w-full gap-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900 !font-bold break-all",children:e.route}),t.jsxs("div",{className:"flex items-center gap-1 mt-1 lg:mt-0",children:[t.jsx(Ce,{prefixIcon:t.jsx(ve,{size:12}),size:"small",color:"white",shape:"circle",onClick:()=>La(e.url),className:"cursor-pointer hover:opacity-80 text-xs",children:o("æµ‹é€Ÿ")}),t.jsx(Ce,{prefixIcon:t.jsx(Ns,{size:12}),size:"small",color:"white",shape:"circle",onClick:()=>window.open(e.url,"_blank","noopener,noreferrer"),className:"cursor-pointer hover:opacity-80 text-xs",children:o("è·³è½¬")})]})]}),t.jsx("div",{className:"!text-semi-color-primary break-all cursor-pointer hover:underline mb-1",onClick:()=>Ra(e.url),children:e.url}),t.jsx("div",{className:"text-gray-500",children:e.description})]})]},e.id),t.jsx(Mt,{})]})):t.jsx("div",{className:"flex justify-center items-center py-8",children:t.jsx(ae,{image:t.jsx(le,{style:F}),darkModeImage:t.jsx(re,{style:F}),title:o("æš‚æ— APIä¿¡æ¯"),description:o("è¯·è”ç³»ç®¡ç†å‘˜åœ¨ç³»ç»Ÿè®¾ç½®ä¸­é…ç½®APIä¿¡æ¯")})})}),t.jsx("div",{className:"card-content-fade-indicator",style:{opacity:ua?1:0}})]})})]})}),Vt&&t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[Ke&&t.jsx(G,{...P,className:"shadow-sm !rounded-2xl lg:col-span-2",title:t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 w-full",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Fs,{size:16}),o("ç³»ç»Ÿå…¬å‘Š"),t.jsx(Ce,{color:"white",shape:"circle",children:o("æ˜¾ç¤ºæœ€æ–°20æ¡")})]}),t.jsx("div",{className:"flex flex-wrap gap-3 text-xs",children:Ga.map((e,a)=>t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color==="grey"?"#8b9aa7":e.color==="blue"?"#3b82f6":e.color==="green"?"#10b981":e.color==="orange"?"#f59e0b":e.color==="red"?"#ef4444":"#8b9aa7"}}),t.jsx("span",{className:"text-gray-600",children:e.label})]},a))})]}),bodyStyle:{padding:0},children:t.jsxs("div",{className:"card-content-container",children:[t.jsx("div",{ref:we,className:"p-2 max-h-96 overflow-y-auto card-content-scroll",onScroll:()=>ge(we,Xe),children:xt.length>0?t.jsx(Lt,{mode:"alternate",children:xt.map((e,a)=>t.jsx(Lt.Item,{type:e.type||"default",time:e.time,children:t.jsxs("div",{children:[t.jsx("div",{dangerouslySetInnerHTML:{__html:Le.parse(e.content||"")}}),e.extra&&t.jsx("div",{className:"text-xs text-gray-500",dangerouslySetInnerHTML:{__html:Le.parse(e.extra)}})]})},a))}):t.jsx("div",{className:"flex justify-center items-center py-8",children:t.jsx(ae,{image:t.jsx(le,{style:F}),darkModeImage:t.jsx(re,{style:F}),title:o("æš‚æ— ç³»ç»Ÿå…¬å‘Š"),description:o("è¯·è”ç³»ç®¡ç†å‘˜åœ¨ç³»ç»Ÿè®¾ç½®ä¸­é…ç½®å…¬å‘Šä¿¡æ¯")})})}),t.jsx("div",{className:"card-content-fade-indicator",style:{opacity:ka?1:0}})]})}),We&&t.jsx(G,{...P,className:"shadow-sm !rounded-2xl lg:col-span-1",title:t.jsxs("div",{className:ne,children:[t.jsx(Ts,{size:16}),o("å¸¸è§é—®ç­”")]}),bodyStyle:{padding:0},children:t.jsxs("div",{className:"card-content-container",children:[t.jsx("div",{ref:Ne,className:"p-2 max-h-96 overflow-y-auto card-content-scroll",onScroll:()=>ge(Ne,et),children:bt.length>0?t.jsx(qt,{accordion:!0,expandIcon:t.jsx(ns,{}),collapseIcon:t.jsx(is,{}),children:bt.map((e,a)=>t.jsx(qt.Panel,{header:e.question,itemKey:a.toString(),children:t.jsx("div",{dangerouslySetInnerHTML:{__html:Le.parse(e.answer||"")}})},a))}):t.jsx("div",{className:"flex justify-center items-center py-8",children:t.jsx(ae,{image:t.jsx(le,{style:F}),darkModeImage:t.jsx(re,{style:F}),title:o("æš‚æ— å¸¸è§é—®ç­”"),description:o("è¯·è”ç³»ç®¡ç†å‘˜åœ¨ç³»ç»Ÿè®¾ç½®ä¸­é…ç½®å¸¸è§é—®ç­”")})})}),t.jsx("div",{className:"card-content-fade-indicator",style:{opacity:Da?1:0}})]})}),Ge&&t.jsxs(G,{...P,className:"shadow-sm !rounded-2xl lg:col-span-1",title:t.jsxs("div",{className:"flex items-center justify-between w-full gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ve,{size:16}),o("æœåŠ¡å¯ç”¨æ€§")]}),t.jsx(Re,{icon:t.jsx(At,{}),onClick:X,loading:at,size:"small",theme:"borderless",type:"tertiary",className:"text-gray-500 hover:text-blue-500 hover:bg-blue-50 !rounded-full"})]}),bodyStyle:{padding:0},children:[t.jsx("div",{className:"relative",children:t.jsx(cs,{spinning:at,children:_.length>0?_.length===1?t.jsxs("div",{className:"card-content-container",children:[t.jsx("div",{ref:Se,className:"p-2 max-h-[24rem] overflow-y-auto card-content-scroll",onScroll:()=>ge(Se,de),children:ft(_[0].monitors)}),t.jsx("div",{className:"card-content-fade-indicator",style:{opacity:tt?1:0}})]}):t.jsx(Rt,{type:"card",collapsible:!0,activeKey:M,onChange:ot,size:"small",children:_.map((e,a)=>{ue.current[e.categoryName]||(ue.current[e.categoryName]=ms.createRef());const s=ue.current[e.categoryName];return t.jsx(A,{tab:t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(ve,{size:14}),e.categoryName,t.jsx(Ce,{color:M===e.categoryName?"red":"grey",size:"small",shape:"circle",children:e.monitors?e.monitors.length:0})]}),itemKey:e.categoryName,children:t.jsxs("div",{className:"card-content-container",children:[t.jsx("div",{ref:s,className:"p-2 max-h-[21.5rem] overflow-y-auto card-content-scroll",onScroll:()=>ge(s,de),children:ft(e.monitors)}),t.jsx("div",{className:"card-content-fade-indicator",style:{opacity:M===e.categoryName&&tt?1:0}})]})},a)})}):t.jsx("div",{className:"flex justify-center items-center py-8",children:t.jsx(ae,{image:t.jsx(le,{style:F}),darkModeImage:t.jsx(re,{style:F}),title:o("æš‚æ— ç›‘æŽ§æ•°æ®"),description:o("è¯·è”ç³»ç®¡ç†å‘˜åœ¨ç³»ç»Ÿè®¾ç½®ä¸­é…ç½®Uptime")})})})}),_.length>0&&t.jsx("div",{className:"p-3 bg-gray-50 rounded-b-2xl",children:t.jsx("div",{className:"flex flex-wrap gap-3 text-xs justify-center",children:Za.map((e,a)=>t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color}}),t.jsx("span",{className:"text-gray-600",children:e.label})]},a))})})]})]})})]})};export{no as default};
